# 管理者ダッシュボード設定ガイド

## 概要
このドキュメントでは、ダウトオセロの管理者ダッシュボードの設定方法を説明します。

## 管理者権限の設定

1. `.env.local` ファイルに管理者のメールアドレスを追加します：

```env
NEXT_PUBLIC_ADMIN_EMAILS=admin@example.com,admin2@example.com
```

複数の管理者を設定する場合は、カンマ区切りで記載してください。

## 管理者ダッシュボードへのアクセス

1. 管理者メールアドレスでログイン
2. ホーム画面右下に管理者ボタン（歯車アイコン）が表示されます
3. ボタンをクリックして管理者ダッシュボードにアクセス

または直接 `/admin` にアクセスしてください。

## 管理者ダッシュボードの機能

### 1. 概要タブ
- **ユーザー数統計**
  - 総ユーザー数
  - 今日の新規登録数
  - 今週の新規登録数
  - 今月の新規登録数

- **登録推移グラフ**
  - 過去30日間の日別新規登録数をグラフで表示

### 2. ユーザー一覧タブ
- 全ユーザーの詳細情報を表示
  - ニックネーム・メールアドレス
  - 年齢
  - 登録日
  - ゲーム数
  - 勝率（勝敗数含む）
  - ダウト成功数

### 3. ゲーム統計タブ
- **全体統計**
  - 総ゲーム数
  - プレイヤー勝利数
  - AI勝利数
  - 引き分け数

- **難易度別統計**
  - 各難易度（初級・中級・上級・鬼）ごとの：
    - ゲーム数
    - 勝利数・勝率
    - 敗北数
    - 引き分け数

## セキュリティ上の注意

1. 管理者メールアドレスは環境変数で管理し、コードにハードコーディングしない
2. 管理者ダッシュボードへのアクセスは認証済みかつ承認されたユーザーのみに制限
3. Supabaseの行レベルセキュリティ（RLS）を適切に設定する
4. 本番環境では、より堅牢な管理者認証システムの実装を検討する

## トラブルシューティング

### 管理者ボタンが表示されない
- ログインしているメールアドレスが `NEXT_PUBLIC_ADMIN_EMAILS` に含まれているか確認
- ブラウザをリロードして再度確認

### データが表示されない
- Supabaseの接続設定を確認
- ブラウザのコンソールでエラーを確認
- Supabaseダッシュボードでデータベースの状態を確認